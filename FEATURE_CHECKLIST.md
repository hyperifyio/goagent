* [x] Initialize repo with Go module and scaffolding: run `mkdir agentcli && cd agentcli && git init && go mod init github.com/<org>/agentcli`; add `LICENSE` (MIT), `README.md` (purpose, usage, examples), `.gitignore` (bin/, dist/, .DS_Store, go.work, .idea, .vscode); create directories `cmd/agentcli`, `internal/oai`, `internal/tools`, `docs/adr`, `docs/diagrams`; set default model id `oss-gpt-20b` and default OpenAI-compatible base URL `https://api.openai.com/v1` to be read from env or flags.
* [x] Implement `cmd/agentcli/main.go` non-interactive run loop: `package main` with `main()` reading flags, building initial messages `[system,user]`, calling the HTTP client, executing any returned tool calls, appending tool results as `role=tool` messages, repeating until the model returns a final assistant message with text, then printing to stdout and exiting 0; all failures print a concise error to stderr and exit non-zero (2 for CLI misuse like missing `-prompt`, 1 otherwise).
* [x] Implement full CLI flag set with defaults and env fallbacks: `-prompt (string, required)`, `-tools (path to tools.json, optional)`, `-system (string, default "You are a helpful, precise assistant. Use tools when strictly helpful.")`, `-base-url (string, default env OAI_BASE_URL or https://api.openai.com/v1)`, `-api-key (string, default env OAI_API_KEY)`, `-model (string, default env OAI_MODEL or oss-gpt-20b)`, `-max-steps (int, default 8)`, `-timeout (duration, default 30s, applies to HTTP and tool exec unless tool overrides)`, `-temp (float64, default 0.2)`, `-debug (bool, default false, dumps request/response JSON to stderr)`; precedence: flag > env > hard default; validate `-prompt` non-empty before running.
* [x] Implement OpenAI-compatible client (POST `/v1/chat/completions`): define request types `{model, messages[], tools[], tool_choice:"auto", temperature}` and response types `{choices[].message{role,content,tool_calls[]}, choices[].finish_reason}`; send `Authorization: Bearer <api-key>` if provided; `Content-Type: application/json`; use `http.Client{Timeout: <timeout>}`; treat any non-2xx as error with body included; support `finish_reason` but not required to stop if you already have final content; never stream in MVP.
* [x] Wire default config for oss-gpt-20b: honor `OAI_MODEL=oss-gpt-20b`, `OAI_BASE_URL=https://api.openai.com/v1`, and `OAI_API_KEY=<token>`; document that any OpenAI-compatible endpoint can be used by changing `-base-url` and `-model`; ensure no hard dependency on OpenAI SDKs (pure net/http).
* [x] Implement tool manifest loader `internal/tools/manifest.go`: load `tools.json`; schema per tool `{ "name": string (required, unique), "description": string, "schema": object (JSON Schema for params), "command": [string,...] (argv, required), "timeoutSec": int (optional per-call) }`; validate: name non-empty, command len>=1, names unique; build a registry `map[string]ToolSpec` and an OpenAI “tools” array `[{type:"function", function:{name,description,parameters}}]`; return both; on parse/validation error, fail fast with clear message including tool name.
* [x] Implement secure tool runner `internal/tools/runner.go`: execute tools via `exec.CommandContext(ctx, argv[0], argv[1:]...)`; pass function arguments string verbatim to tool stdin (JSON), capture stdout (string) and stderr; apply timeout: prefer per-tool `timeoutSec`, else global `-timeout`; scrub environment to a minimal allowlist (PATH and HOME only); never invoke a shell; return stdout as the tool result string; on timeout return error "tool timed out", on non-zero exit return error including stderr snippet.
* [x] Implement assistant tool-call loop in `main.go`: request includes `tool_choice:"auto"` and declared tools; when assistant message contains `tool_calls`, iterate each call with `type:"function"`, find spec by `function.name`; if unknown, synthesize a tool result `{"error":"unknown tool <name>"}`; for each executed call, append a message `{role:"tool", name:<function.name>, tool_call_id:<id>, content:<tool stdout or error JSON>}`; then immediately call the API again with the extended transcript; stop when assistant returns content and zero tool_calls; print content to stdout.
* [x] Map tool failures deterministically to JSON error content: on any runner error, set tool message content to a single-line JSON `{"error":"<sanitized message>"}` where message is JSON-escaped and truncated (e.g., to 1k chars) to avoid prompt bloat; do not exit on individual tool errors—let the model decide recovery; only exit non-zero if the overall run loop ends without producing final assistant text or if the HTTP call fails.
* [x] Provide example tool `tools/get_time.go` and build instructions: implements `stdin` JSON `{"tz":"Europe/Helsinki"}` (default `"UTC"` if omitted); outputs single-line JSON `{"tz":"...","iso":"RFC3339","unix":<seconds>}` to stdout; returns exit code 0 on success; build with `go build -o tools/get_time ./tools/get_time.go`; usage example prompt: “What’s the local time in Helsinki? If tools are available, call get_time.”; confirm tool respects `TZ` value strictly via `time.LoadLocation`.
* [x] Provide example `tools.json` colocated at repo root: `{ "tools":[ { "name":"get_time", "description":"Get current time for an IANA timezone", "schema":{ "type":"object", "properties":{ "tz":{"type":"string","description":"IANA timezone, e.g. Europe/Helsinki"} }, "required":["tz"], "additionalProperties":false }, "command":["./tools/get_time"], "timeoutSec":5 } ] }`; document that `command` is relative to the working directory of `agentcli`.
* [x] Add build targets: root `Makefile` with `build: go build -o bin/agentcli ./cmd/agentcli`, `build-tools: go build -o tools/get_time ./tools/get_time.go`, `lint`, `test`, `clean`; ensure `CGO_ENABLED=0` for reproducible static binaries; support `GOOS`/`GOARCH` overrides for cross-compilation; add `bin/` and built tools to `.gitignore`.
* [x] Write README quickstart that is fully runnable: prerequisites (Go 1.21+), `make build build-tools`, export `OAI_BASE_URL`, `OAI_MODEL=oss-gpt-20b`, `OAI_API_KEY` if required, then run `./bin/agentcli -prompt "What's the local time in Helsinki? Use get_time." -tools ./tools.json -debug`; explain expected behavior (model triggers function call, tool prints JSON, agent posts back, model replies with final text), and show sample output line and non-zero exit behavior on errors.
* [x] Add ADR-0001 documenting architecture and protocol: create `docs/adr/0001-minimal-agent-cli.md` containing context (non-interactive CLI agent with OpenAI-compatible API and local tools), options considered (Go vs Python vs local inference), decision (Go + Chat Completions tools + argv tools), rationale (static binary, process control, vendor-agnostic), consequences (no streaming in MVP, single-threaded tool calls), and a link to the canonical GitHub issue; include explicit contracts for CLI flags and tool I/O in the ADR.
* [x] Add Mermaid sequence diagram kept in repo: `docs/diagrams/agentcli-seq.md` with a `sequenceDiagram` that shows CLI → API → tool → API → final response; reference this file from both `README.md` and ADR-0001; require updates to diagram in any PR that changes the loop or message flow.
* [x] Implement unit tests (deterministic) for manifest, runner, and client: `internal/tools/manifest_test.go` verifies invalid/missing fields and uniqueness errors; `internal/tools/runner_test.go` includes a helper tool binary that sleeps to trigger timeout and asserts `"tool timed out"` mapping; `internal/oai/client_test.go` uses `httptest.Server` to return 500 and asserts error includes status and body; tests must run offline and pass on `go test ./...`.
* [x] Implement conversation-loop test using `httptest.Server` and a fake tool: server step 1 responds with assistant message containing `tool_calls=[{id:"1",type:"function",function:{name:"echo",arguments:"{\"text\":\"hi\"}"}}]`; fake tool reads stdin `{"text":"hi"}` and prints `{"echo":"hi"}`; server step 2 returns final assistant message `"done"`; run `agentcli` main via a small wrapper (or extract loop into testable function) and assert stdout equals `"done\n"` and exit code 0.
* [x] Document security posture and trust boundaries in README: tools are an explicit allowlist (`tools.json`); no shell invocation (argv only); stdin/stdout JSON contract; per-call timeouts; minimal environment; recommend running untrusted tools under containment (container/jail/user namespace) and setting a working directory with restricted permissions; clarify that the model is untrusted input—never pass its arguments to a shell; state that secrets must be supplied via env/CI secrets and never committed.
* [x] Output an error if any configured tool is missing and unavailable
* [x] Improve .cursor/rules/work-on-features.mdc to instruct that files must be deleted using `git rm ...` command
* [x] Implement `tools/exec.go` (unrestricted command exec) — stdin `{"cmd":"string","args":["..."],"cwd?:string,"env?:{K:V},"stdin?:string,"timeoutSec?:int}`; run via `exec.CommandContext` (no shell), full network allowed; stdout single-line JSON `{"exitCode":int,"stdout":"string","stderr":"string","durationMs":int}`; DoD: TDD unit + integ tests (success, non-zero, timeout, cwd/env, stdin), README example, traced to issue, CI green with coverage unchanged.
* [x] Implement `tools/fs_read_file.go` — stdin `{"path":"string","offsetBytes?:int,"maxBytes?:int}` (repo-relative); outputs `{"contentBase64":"string","sizeBytes":int,"eof":bool}`; DoD: tests (text, binary round-trip, ranges, NOT_FOUND), docs example, link to issue, CI green.
* [x] Implement `tools/fs_write_file.go` (atomic write) — stdin `{"path":"string","contentBase64":"string","createModeOctal?":"0644"}`; write via temp+rename; outputs `{"bytesWritten":int}`; DoD: tests (create, overwrite, binary, missing parent error), docs example, CI green.
* [x] Implement `tools/fs_append_file.go` — stdin `{"path":"string","contentBase64":"string"}`; append (create if missing) with advisory file lock; outputs `{"bytesAppended":int}`; DoD: tests (double append, concurrent writers), docs example, CI green.
  - [x] [S01] stub types and argument validation for fs_append_file (repo-relative path, base64 decode)
  - [x] [S02] failing contract test for double append (create-if-missing, then append)
  - [x] [S03] minimal passing implementation for single-writer append with advisory lock (no concurrency test yet)
  - [x] [S04] add concurrent writers test (two goroutines append deterministically; order-agnostic content length assertion)
  - [x] [S05] strengthen implementation to pass concurrency test and add README docs example
* [x] Implement `tools/fs_mkdirp.go` — stdin `{"path":"string","modeOctal?":"0755"}`; recursively create; outputs `{"created":bool}`; DoD: tests (deep path, idempotence), docs example, CI green.
  - [x] [S01] implement minimal mkdirp behavior and docs example; tests pass offline
* [x] Implement `tools/fs_rm.go` — stdin `{"path":"string","recursive?:bool,"force?:bool}`; remove file/dir; outputs `{"removed":bool}`; DoD: tests (file, dir tree, force on missing), docs example, CI green.
  - [x] [S01:rm-delete-file-test] failing unit test for deleting a regular file
  - [x] [S02:rm-delete-file-impl] minimal implementation to delete a regular file and pass S01
  - [x] [S03:rm-force-on-missing-test] unit test for force=true on missing path (expects exit 0 and removed=false)
  - [x] [S04:rm-readme-example] README example and Makefile build rule for fs_rm; tests pass
* [x] Implement `tools/fs_move.go` — stdin `{"from":"string","to":"string","overwrite?:bool}`; rename or copy+remove across devices; outputs `{"moved":bool}`; DoD: tests (rename, overwrite=false blocks, cross-device), docs example, CI green.
  - [x] [S03:move-overwrite-true] unit test for overwrite=true replacing existing destination; ensure implementation passes
* [x] Add docs/README.md as a short index and navigation for the docs tree with cross links to docs/adr/0001-minimal-agent-cli.md and docs/diagrams/agentcli-seq.md, smallest change is creating the index and adding links from the top level README and ADR, scope limited to documentation, low risk and independent, DoD includes tests unchanged and green with no coverage regression, build reproducible, static analysis type checks formatting linting security scanning and secret detection all green, backward compatibility unaffected, docs updated in the same change, at least one peer review completed and linked, verification by rendering links on GitHub, rollback by reverting the file and cross links, traceability 
  - [x] [S01:docs-index] create `docs/README.md` index with links to ADR-0001 and sequence diagram
  - [x] [S02:cross-links] add links from top-level `README.md` and ADR-0001 back to `docs/README.md`
* [x] Write docs/architecture/module-boundaries.md to define allowed imports and layering between cmd internal/oai internal/tools and tools binaries, include a simple Mermaid diagram and guidance for adding new packages, smallest change is adding this single document and linking it from docs/README.md and README, scope documentation, low risk, DoD includes tests unchanged and green with no coverage regression all quality gates green backward compatibility preserved docs and changelog updated as needed peer review completed verification by rendering diagram on GitHub and checking links rollback by reverting the doc and links, traceability 
  - [x] [S01:module-boundaries-doc] add module-boundaries doc and cross‑links from `README.md` and `docs/README.md`
* [x] Keep Makefile clean target symmetrical with build-tools by also removing tools/fs_search (currently omitted) so stale tool binaries are not left behind; smallest change is adding tools/fs_search to the clean recipe; scope Makefile; low risk; DoD includes running make build-tools then make clean leaves no built tool binaries (git status clean), tests unchanged and green, all quality gates green, peer review completed, verification by the described commands, rollback by reverting the Makefile change.
* [x] Reconcile minimum Go version by setting a single supported floor across go.mod and README.md (go.mod currently declares go 1.24.6 while README states Go 1.21+); smallest change is either lowering the go directive in go.mod to 1.21 to match docs or updating README (and future CI matrix) to 1.24+; scope limited to go.mod, docs, and CI config when added; low risk; DoD includes tests unchanged and green with no coverage regression, reproducible build, all quality gates green (vet/format/lint/security/secret detection) with no new findings, backward compatibility preserved, at least one peer review completed, verification by building on the declared floor version locally and in CI, rollback by reverting the version/doc change.
* [x] Update README.md fs_mkdirp example to remove the outdated note “until aggregated in Makefile” and use the existing make build-tools step consistently; smallest change is editing that section only; scope documentation; low risk; DoD includes tests unchanged and green, all quality gates green, README renders correctly on GitHub, peer review completed, verification by running the example from a clean clone after make build build-tools, rollback by reverting the edit.
* [x] Align the get_time tool contract across tools/timecli (expects {"timezone":"..."} and outputs {"timezone","iso8601"}), README.md (describes tz and unix seconds), and tools.json (declares required tz) by choosing one canonical schema (prefer timezone with optional alias tz) and updating code, tests, and docs accordingly; smallest change is adding a backward-compatible alias in code and adjusting docs/manifest; scope limited to this tool; low risk; DoD includes unit test covering both inputs and output fields, README quick start and tools.json updated, all quality gates green with no coverage regression, peer review completed, verification by running the quick start end-to-end, rollback by reverting the edits.
* [x] Normalize API key environment variable naming across the repo to OAI_API_KEY (scripts like scripts/smoke-test.sh currently reference OPENAI_API_KEY) and document the canonical variable in README.md while keeping the old name as a fallback for compatibility; smallest change is updating the script to prefer OAI_API_KEY with OPENAI_API_KEY fallback and adjusting docs; scope small; low risk; DoD includes tests unchanged and green, all gates green, verification by running the script with only OAI_API_KEY set and observing successful auth header injection, rollback by reverting the script and doc changes.
* [x] Create docs/reference/tools-manifest.md that precisely documents the tools.json schema required and optional fields validation rules examples and common mistakes and how schemas are exposed to the model, smallest change is a focused reference page and links from README usage and ADR-0001, scope documentation, low risk, DoD includes examples runnable locally tests unchanged and green all quality gates green backward compatibility unaffected peer review completed verification by running example commands and rendering on GitHub rollback by removing the doc and links, traceability 
  - [x] [S01:manifest-doc] create `docs/reference/tools-manifest.md` reference page
  - [x] [S01b:manifest-unblock-green] stabilize tools tests or restore missing tool packages so docs-only changes keep test suite green
    - [x] [S01b-a:restore-missing-tool-dirs] restore missing tool packages: `tools/fs_append_file`, `tools/fs_move`, `tools/fs_rm`, `tools/fs_write_file` (add minimal `main` stubs to compile; behavior tests to pass in later slices)
  - [x] [S02:manifest-links] add links from `README.md`, `docs/README.md`, and ADR-0001
* [x] Author docs/security/threat-model.md expanding on trust boundaries untrusted model output handling tool containment recommendations secrets handling logging and redaction expectations and audit considerations, smallest change is adding this page and linking it from README Security model, scope documentation, low risk, DoD includes tests unchanged and green all quality gates green backward compatibility unaffected peer review completed verification by reviewing content accuracy and link rendering rollback by reverting the doc and links, traceability 
* [x] Provide docs/runbooks/troubleshooting.md covering common errors and fixes including missing tool binaries repo relative path violations tool timeouts HTTP errors and golangci-lint installation path with copy paste commands, smallest change is adding this runbook and linking from README Troubleshooting, scope documentation, low risk, DoD includes steps verified on a clean clone tests unchanged and green all quality gates green peer review completed verification by following steps locally rollback by reverting the doc and links, traceability 
* [x] Fix tools/timecli error contract to write errors to stderr and exit non-zero instead of printing error JSON to stdout so the runner maps failures to {"error":"..."} deterministically; smallest change is adjusting error paths in tools/timecli/main.go and adding focused unit tests; scope limited to timecli and tests; low risk; DoD includes failing test first then passing after change, README examples still work, tests elsewhere unchanged and green with no coverage regression, all quality gates green, peer review completed, verification by piping invalid input and observing non-zero exit with stderr JSON, rollback by reverting the edits.
* [x] Reconcile model identifier in README quick start with default OAI_MODEL by choosing one canonical value (currently README uses openai/gpt-oss-20b while defaults use oss-gpt-20b) and updating docs accordingly; smallest change is editing README only; scope documentation; low risk; DoD includes docs render correctly, examples runnable from a clean clone, tests unchanged and green, all quality gates green, peer review completed, verification by running the quick start with the documented model, rollback by reverting the edit.
* [x] Implement `tools/fs_search.go` — stdin `{"query":"string","regex?:bool,"globs?:["**/*.go"],"maxResults?:int}`; returns `{"matches":[{"path":"string","line":int,"col":int,"preview":"string"}],"truncated":bool}`; DoD: tests (literal, regex, glob filter, truncation), docs example, CI green.
  - [x] [S01:search-failing-literal-test] add failing unit test for literal search on a small fixture file (no regex, no globs)
  - [x] [S02:search-skeleton] scaffold minimal `tools/fs_search` program with argument parsing/types
  - [x] [S03:search-impl-literal] minimal implementation to pass literal search test
  - [x] [S04:search-regex-glob-tests] add tests for regex and glob filtering
  - [x] [S05:search-truncation] implement maxResults truncation and test
* [x] Update scripts/smoke-test.sh to remove goresearch and SearxNG checks and make it goagent-specific retaining only the OpenAI-compatible LLM health check and clarifying messages; smallest change is editing the script header and deleting the Searx section; scope scripts; low risk; DoD includes script runs locally and reports PASS/FAIL for LLM reachability without Docker or Searx, tests unchanged and green, all quality gates green, peer review completed, verification by executing the script on a clean clone, rollback by reverting the script change.
  - [x] [S01:build-tools-entries] include `fs_mkdirp` and `fs_apply_patch` in `build-tools` and `clean`; align README fs_mkdirp example to use `make build-tools`
* [x] Update README with “unrestricted tools” warning + examples — clear risk note, copy-paste examples for each fs/* and exec tool, troubleshooting; DoD: docs lint passes, examples exercised in CI script, CI green.
  - [x] [S01:adr-file-and-links] create ADR file and add links from `README.md` and `docs/README.md`
* [x] Add Mermaid diagram `docs/diagrams/toolbelt-seq.md` — sequence of CLI → API → tools → API → final; DoD: diagram renders on GitHub, referenced from README/ADR, updated test ensuring file exists, CI green.
* [x] Example prompts `examples/unrestricted.md` — prompts demonstrating `exec` + fs tools to write, build, and run code; DoD: examples validated by CI script, README link, CI green.
* [x] Implement `tools/fs_apply_patch.go` (unified diff) — stdin `{"unifiedDiff":"string","dryRun?:bool}`; strict apply (no fuzz), pre-validate with dry-run; outputs `{"filesChanged":int}`; DoD: tests (clean apply, conflict, idempotence, CRLF), docs example + cautions, CI green.
  - [x] [S01:fs-apply-patch-stub] add stub tool validating input and exiting with NOT_IMPLEMENTED; build and tests remain green; groundwork for strict apply
  - [x] [S02:fs-apply-clean-new-file] implement strict new-file unified diff apply and tests (clean apply creating a new file); umbrella remains open for conflict/idempotence/CRLF and docs
* [x] Implement tools/fs_edit_range.go — stdin {"path":"string","startByte":int,"endByte":int,"replacementBase64":"string","expectedSha256?":"string"}; atomically rewrite by splicing the range; output {"bytesReplaced":int,"newSha256":"string"}; DoD: TDD for mid-file edits, boundary cases (start=0, end=size), binary content, concurrent calls serialized, docs + CI green.
  - [x] [S01:fs-edit-mid] add failing mid-file splicing test ensuring bytes [start:end) replaced and SHA reported
  - [x] [S02:fs-edit-mid-impl] minimal implementation to pass mid-file splicing and boundary cases; tests green
  - [x] [S03:fs-edit-lock] serialize concurrent edits with advisory file lock and add concurrency test; tests green
* [x] Implement tools/fs_read_lines.go — stdin {"path":"string","startLine":int,"endLine":int,"maxBytes?":int}; output {"content":"string","startLine":int,"endLine":int,"eof":bool}; DoD: TDD for LF/CRLF, UTF-8 multibyte safety, large files, docs + CI green.
* [x] Implement `tools/fs_listdir.go` — stdin `{"path":"string","recursive?:bool,"globs?:["**/*"],"includeHidden?:bool,"maxResults?:int}`; outputs `{"entries":[{"path":"string","type":"file|dir|symlink","sizeBytes":int,"modeOctal":"string","modTime":"RFC3339"}],"truncated":bool}`; paths repo-relative, stable ordering (dirs first, then files, lexicographic); DoD: TDD (empty dir, files+dirs, hidden on/off, glob filters, recursion, truncation, symlink entry), README example, linked issue, CI green with coverage unchanged.
  - [x] [S02:listdir-readme-example] add README `fs_listdir` example section and ensure tests remain green
  - [x] [S01:listdir-tools-manifest] add `fs_listdir` tool entry to `tools.json` and ensure tests remain green
* [x] Implement `tools/fs_stat.go` — stdin `{"path":"string","followSymlinks?:bool,"hash?: "none"|"sha256"}`; outputs `{"exists":bool,"type":"file|dir|symlink|other","sizeBytes":int,"modeOctal":"string","modTime":"RFC3339","sha256?":"string"}`; error on paths outside repo; DoD: TDD (file/dir/symlink, missing path, follow vs no-follow, optional hash), README example, linked issue, CI green.
  - [x] [S01:fs-stat-file-test] add failing unit test for existing regular file reporting exists=true, type="file", and sizeBytes
  - [x] [S02:fs-stat-file-impl] minimal implementation to pass file test
  - [x] [S03:fs-stat-missing] add test for missing path returns exit 0 and exists=false
  - [x] [S04:fs-stat-symlink+hash-tests] add tests for symlink follow/no-follow and sha256 output
* [x] Extend `tools.json` with new tools — add entries (name, description, JSON Schema, `command`, `timeoutSec`); loader must validate and surface schemas to OpenAI tools; DoD: manifest unit test (schema validity, names unique), sample `tools.json` updated, CI green.
* [x] Add Makefile build rules for all new tools — `build-tools` compiles each `./tools/*.go` to deterministic static binaries; DoD: `make build build-tools` passes locally and CI, artifacts gitignored, docs updated.
  - [x] [S02:gitignore-binaries] ignore built tool binaries (`tools/*/*` and single-file outputs) and untrack existing ones; verify `git status` clean after `make build-tools` and `make clean`
* [x] Integrate tools into agent loop — ensure `agentcli` advertises schemas and executes tool calls end-to-end; DoD: integration test with fake API that triggers `fs_write_file` → `fs_read_file` → final message, README cross-referenced, CI green.
* [x] Add execution audit log in runner — append ndjson `{ts,tool,argv,cwd,exit,ms,stdoutBytes,stderrBytes,truncated}` to `.goagent/audit/YYYYMMDD.log`; DoD: unit test writes/rotates, redaction respected (see next), docs, CI green.
  - [x] [S01:audit-write-line] append NDJSON audit to `.goagent/audit/YYYYMMDD.log` and add unit test verifying a line is written with expected fields; CI green.
  - [x] [S02:audit-rotation] verify daily rotation behavior across date boundary with unit test; CI green.
  - [x] [S03:audit-redaction] implement sensitive-value redaction and document fields; tests and docs; CI green.
* [x] Provide “capabilities” CLI (`agentcli -capabilities`) — prints enabled tools from `tools.json` and explicit warning that enabled tools allow arbitrary command execution and network access; DoD: unit test, README usage, CI green.
* [x] Add ADR-0002 “Unrestricted toolbelt (files+network)” — context, options, decision, consequences, JSON contracts, link to issue; DoD: ADR committed, referenced from README, peer-reviewed, CI doc checks green.
* [x] Remove unused duplicate exec implementation by deleting tools/execcli and consolidating the exec tool under tools/exec to avoid drift and dual maintenance; smallest change is removing the tools/execcli directory with git rm and adjusting any references if present (tests currently build ./tools/exec); scope tools; low risk; DoD includes a failing dead-code check first (build/grep) then passing after removal, tests unchanged and green with no coverage regression, all quality gates green (vet, format, golangci-lint, static analysis, security scanning and secret detection) with no new findings, reproducible builds, README exec example still runs end to end, peer review completed, verification by running go test ./... and make build-tools from a clean clone and confirming no references to execcli remain, rollback by restoring the directory from Git.
* [x] Remove the no-op jitter and unneeded math/rand import in internal/tools/runner.go to reduce accidental complexity and potential lint noise; smallest change is deleting the unused rand.Int() call and its import; scope internal/tools; low risk; DoD includes a focused unit test asserting deterministic stdout/stderr collection without flakiness, tests otherwise unchanged and green with race/coverage, all quality gates green with no new findings, peer review completed, verification by running the test suite repeatedly and observing stability, rollback by restoring the line if flakiness reappears.
* [x] Update scripts/wait-for-health.sh to drop SearxNG and Docker Compose checks and poll only the OpenAI-compatible LLM models endpoint to align with this repo’s scope; smallest change is editing that single script only; scope scripts; low risk; DoD includes reproducing the current mixed-scope behavior then passing after the edit with tests elsewhere unchanged and green and no coverage regression, all quality gates green (vet/format/lint/security/secret detection) with no new findings, verification by running the script with LLM_BASE_URL set and observing timely success/failure for the models endpoint, and rollback by reverting the script change.
* [x] Teach the CLI to accept OPENAI_API_KEY as a fallback when OAI_API_KEY is unset to improve compatibility with existing environments and scripts while keeping OAI_API_KEY canonical in docs, smallest change is adding an env fallback in cmd/agentcli/main.go only; scope CLI; low risk; DoD includes a focused unit test for env resolution precedence (flag > OAI_API_KEY > OPENAI_API_KEY > default), tests otherwise unchanged and green with no coverage regression, all quality gates green (vet, format, golangci-lint, static analysis, security scanning and secret detection) with no new findings, peer review completed, verification by running the CLI with only OPENAI_API_KEY set and observing the Authorization header present, rollback by reverting the change.
* [x] Normalize environment variable names across scripts to prefer OAI_BASE_URL and OAI_MODEL with fallback from existing LLM_BASE_URL so users have one canonical set while keeping compatibility, smallest change is editing scripts to read OAI variables first with LLM fallbacks and adjusting README wording, scope scripts and docs, low risk; DoD includes running smoke and health scripts with only OAI_* set and observing success, tests unchanged and green with no coverage regression, all quality gates green, peer review completed, verification by executing the scripts locally, rollback by reverting the edits.
  - [x] [S01:l98-submodule-update] Update `scripts` submodule to modify `wait-for-health.sh` and `smoke-test.sh` to prefer `OAI_*` with `LLM_*` fallback; commit in submodule and bump superproject pointer.
* [ ] Unify tool hierarchy so each tool’s binary is in ./tools/bin/NAME, source in ./tools/cmd/NAME/NAME.go, and tests in ./tools/cmd/NAME/NAME_test.go, updating Makefile, tools.json, documentation, tests, and all other affected places to use a consistent unique naming format.
  - [x] [S01:l90-make-bin-outputs] Update `Makefile` to emit binaries under `tools/bin/NAME` while keeping legacy outputs for transition; tests green.
  - [x] [S54:l90-lint-wire-path-guard] Amend `Makefile` `lint` target to invoke `$(MAKE) check-tools-paths` after golangci-lint/vet/format so path hygiene is enforced locally and in CI; DoD: running `make lint` on current branch fails due to legacy `./tools/<name>` references and passes after migration slices, scope limited to `Makefile`, tests unchanged and green.
  - [x] [S54a:l90-unblock-tests-legacy-dirs] Unblock S54 by restoring legacy tool source dirs expected by tests (e.g., `tools/exec`, `tools/fs_write_file`, `tools/fs_append_file`, ...), or adjust tests to current layout so `go test ./...` is green before committing S54.
  - [x] [S55:l90-guard-single-file-builds] Extend `check-tools-paths` (Makefile) to also fail on single-file or direct tool builds outside the canonical layout using a search like `rg -n '(\./tools/[a-z_]+\.go|go\s+(build|run)\s+.*\./tools/[a-z_]+)' -g '!tools/cmd/**' -g '!tools/bin/**' -g '!FEATURE_CHECKLIST.md'` across the repo; DoD: `make check-tools-paths` fails before migration and passes after, no behavior changes elsewhere.
  - [x] [S56:l90-runbook-windows-examples] Update `docs/runbooks/troubleshooting.md` examples to include Windows variants using `./tools/bin/NAME.exe` alongside Unix `./tools/bin/NAME` so users on Windows can follow identical steps; DoD: doc renders on GitHub, and `rg -n '\.exe' docs/runbooks/troubleshooting.md` finds at least one tool invocation; tests unchanged and green.
  - [x] [S57:l90-manifest-doc-errors] Document new validator errors in `docs/reference/tools-manifest.md` under “Common mistakes” (messages for relative `command[0]` not starting with `./tools/bin/` and for normalized escapes like `./tools/bin/../hack`), aligning wording with `internal/tools/manifest.go`; DoD: docs render, and `rg -n 'start with \\./tools/bin|escapes \\./tools/bin' docs/reference/tools-manifest.md` matches; tests unchanged and green.
  - [x] [S49:l90-windows-bin-extensions] Update `Makefile` `build-tools` and `clean` recipes to emit `.exe` suffix when `GOOS=windows` for all binaries under `tools/bin/NAME(.exe)` and to remove them on `make clean`; verify by `GOOS=windows make build-tools` producing `tools/bin/{get_time,exec,fs_*}.exe` and `make clean` leaving `git status` clean; DoD: commands reproducible on Linux/macOS cross-compiling to Windows, tests unchanged and green.
  - [x] [S50:l90-docs-windows-exe] Document OS-specific binary names in `docs/reference/tools-manifest.md` and `README.md` (Quick start and tool examples): require relative `command[0]` to use `./tools/bin/NAME` on Unix and `./tools/bin/NAME.exe` on Windows, with a short note and dual JSON examples; DoD: docs render on GitHub, `rg "\.\/tools\/bin\/.*\.exe" -n README.md docs/reference/tools-manifest.md` finds at least one Windows example, tests unchanged and green.
  - [x] [S51:l90-guard-no-legacy-paths] Add a `Makefile` target `check-tools-paths` that fails if any `./tools/(get_time|fs_|exec)` invocation remains outside `tools/bin` or `tools/cmd` (excluding `FEATURE_CHECKLIST.md`); implement with `rg` and negative globs; DoD: `make check-tools-paths` passes after migration, and fails before when run on current branch; no code behavior changed.
  - [x] [S52:l90-manifest-escape-check] Harden `internal/tools/manifest.go` validation to reject relative `command[0]` that normalize (via `path.Clean` + `filepath.ToSlash`) to paths containing `..` segments or escaping `./tools/bin/` (e.g., `./tools/bin/../hack`), and add focused tests in `internal/tools/manifest_test.go`; DoD: new tests fail before change and pass after, `go test ./...` green across platforms.
  - [x] [S53:l90-buildtool-windows-suffix-test] Extend `tools/testutil/buildtool.go` (after [S29:l90-test-helper-buildtool]) with a unit test asserting the returned binary path ends with `.exe` when `runtime.GOOS == "windows"` and has no suffix otherwise; migrate one representative tool test to assert the suffix via `BuildTool`; DoD: `go test ./tools/...` green on Unix and Windows runners when available.
  - [x] [S30:l90-manifest-enforce-bin-prefix] Enforce in `internal/tools/manifest.go` that any relative `command[0]` starts with `./tools/bin/` (absolute paths allowed for tests); adapt existing tests under `internal/tools/manifest_test.go` to cover this validation; DoD: added validation causes a failing test before change and passing after, `go test ./...` green.
  - [x] [S31:l90-manifest-doc-bin-prefix] Update `docs/reference/tools-manifest.md` to explicitly require relative `command` entries to use `./tools/bin/NAME`, update the JSON example to match, and note absolute paths are only for tests; DoD: doc renders on GitHub, `rg "\./tools/bin/" docs/reference/tools-manifest.md -n` finds at least one match, tests unchanged and green.
  - [x] [S23:l90-bin-mkdir] Ensure `Makefile` creates `tools/bin` before builds by adding `mkdir -p tools/bin` (or equivalent) at the start of the `build-tools` recipe; DoD: from a clean clone `rm -rf tools/bin && make build-tools` succeeds and produces `tools/bin/{get_time,exec,fs_read_file,fs_write_file,fs_append_file,fs_rm,fs_move,fs_search,fs_mkdirp,fs_apply_patch,fs_read_lines,fs_edit_range,fs_listdir,fs_stat}`.
  - [x] [S24:l90-clean-transitional] Update `Makefile` `clean` to remove both legacy paths (`tools/<NAME>` and `tools/*/<NAME>`) and new `tools/bin/*` during the migration window (until S20 completes) to avoid stale artifacts; DoD: after `make build-tools`, `make clean` leaves `git status` clean with no leftover tool binaries.
  - [x] [S24b:l90-unblock-build-tools] Restore missing tool source directories referenced by `build-tools` (e.g., `tools/exec`, `tools/fs_write_file`) or adapt tests to current layout so `make build-tools` and `go test ./...` pass; then re-run S24 verification.
  - [x] [S25:l90-docs-diagrams-paths] Update `docs/diagrams/agentcli-seq.md` and `docs/diagrams/toolbelt-seq.md` to replace `./tools/<NAME>` with `./tools/bin/<NAME>` where tools are invoked; DoD: both diagrams render on GitHub and `rg "\./tools/(get_time|fs_|exec)" docs/diagrams -n` returns no matches.
  - [x] [S26:l90-runbook-troubleshooting-paths] Revise `docs/runbooks/troubleshooting.md` commands to build from `./tools/cmd/NAME` (post‑migration slices) and execute `./tools/bin/NAME`; DoD: copy‑pasted commands work on a clean clone after `make build build-tools`, and `rg "\./tools/(fs_|exec|get_time)" docs/runbooks -n` only shows `tools/bin` paths.
  - [x] [S27:l90-architecture-doc-alignment] Align examples in `docs/architecture/module-boundaries.md` to the canonical layout (sources under `tools/cmd/NAME/*.go`, binaries under `tools/bin/NAME`) and update any `go build -o tools/<name> ./tools/<...>` snippets; DoD: doc renders and `rg "go build -o tools/" docs/architecture -n` returns no matches.
  - [x] [S28:l90-toolsjson-path-validation] Add a focused unit test in `internal/tools/manifest_test.go` that asserts relative `command[0]` entries in `tools.json` start with `./tools/bin/` (allow absolute paths for test fixtures); DoD: test fails before S02 and passes after, with `go test ./...` green and coverage unchanged.
  - [x] [S29:l90-test-helper-buildtool] Introduce `tools/testutil/buildtool.go` providing `BuildTool(t, name string) (binPath string)` that builds from `./tools/cmd/<name>` into `t.TempDir()`; migrate one representative test (e.g., `tools/fs_listdir_test.go`) to use it as a pattern; DoD: tests pass locally (`go test ./...`), helper adopted without breaking other tests.
  - [x] [S01:l90-make-bin-outputs] Update `Makefile` `build-tools` and `clean` to emit/remove binaries under `tools/bin/NAME` while building from current sources (`tools/timecli`, `tools/exec`, `tools/fs_*`, and `tools/fs_read_file.go`), without moving sources yet; DoD: `make build-tools` creates `tools/bin/{get_time,exec,fs_read_file,fs_write_file,fs_append_file,fs_rm,fs_move,fs_search,fs_mkdirp,fs_apply_patch,fs_read_lines,fs_edit_range,fs_listdir,fs_stat}` and `make clean` removes them, `git status` clean, `go test ./...` green.
  - [x] [S02:l90-toolsjson-bin] Point `tools.json` `command` entries to `./tools/bin/NAME` for all tools (names exactly as current binaries), keeping schemas unchanged; DoD: `./bin/agentcli -prompt "time?" -tools ./tools.json -debug` works with `get_time`, integration tests unaffected, `go test ./...` green.
  - [x] [S03:l90-docs-build-path] Revise `README.md` and `docs/reference/tools-manifest.md` usage snippets to reference `tools/bin/NAME` and `make build-tools`; DoD: docs render, examples run from clean clone (`make build build-tools` then quickstart), tests unchanged and green.
  - [x] [S04:l90-gitignore-tighten] Narrow `.gitignore` to ignore `tools/bin/**` only (and keep sources under `tools/cmd/**` tracked), removing blanket `tools/*/*` ignores while preserving exceptions for `*.go`; DoD: creating `tools/cmd/demo/main.go` is tracked, `make build-tools` yields ignored `tools/bin/*`, `git status` clean, tests green.
  - [x] [S05:l90-test-discovery-update] Update test helpers that build tools to use canonical package paths once migrated (e.g., change build path comments and invocations from `./tools/fs_mkdirp` or `./tools/fs_read_file.go` to `./tools/cmd/NAME` as each tool moves); DoD: targeted tests updated only when their tool migrates, all tests green.
  - [x] [S05a:l90-test-update-fs_mkdirp] After [S06:l90-migrate-fs_mkdirp], replace inline builder in `tools/fs_mkdirp_test.go` with `testutil.BuildTool(t, "fs_mkdirp")` and remove direct `go build ./fs_mkdirp`; DoD: `go test ./tools -run FsMkdirp` passes on Unix/Windows, full suite green.
   - [x] [S06:l90-migrate-fs_mkdirp] Move `tools/fs_mkdirp/main.go` to `tools/cmd/fs_mkdirp/fs_mkdirp.go`, update its tests to build from `./tools/cmd/fs_mkdirp`, and adjust `Makefile` source mapping for `fs_mkdirp`; DoD: `go test ./tools -run FsMkdirp` passes, `make build-tools` builds `tools/bin/fs_mkdirp` from new path, no other tests fail.
  - [ ] [S07:l90-migrate-fs_read_file] Move single-file `tools/fs_read_file.go` to `tools/cmd/fs_read_file/fs_read_file.go`, update `tools/fs_read_file_test.go` build path, and update `Makefile` mapping; DoD: `go test ./tools -run FsReadFile` passes, `tools/bin/fs_read_file` builds from new path, suite green.
  - [ ] [S08:l90-migrate-exec] Move `tools/exec/main.go` to `tools/cmd/exec/exec.go`, update `tools/exec_test.go` build path, and adjust `Makefile`; DoD: `go test ./tools -run Exec` passes, `tools/bin/exec` builds from new path, suite green.
  - [ ] [S09:l90-migrate-get_time] Move `tools/timecli/main.go` to `tools/cmd/get_time/get_time.go` (binary remains `get_time`), update `tools/timecli_test.go` build path, and adjust `Makefile`; DoD: `go test ./tools -run Time` passes, `tools/bin/get_time` builds from new path, suite green.
  - [ ] [S10:l90-migrate-fs_write_file] Move `tools/fs_write_file/main.go` to `tools/cmd/fs_write_file/fs_write_file.go`, update its test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S11:l90-migrate-fs_append_file] Move `tools/fs_append_file/main.go` to `tools/cmd/fs_append_file/fs_append_file.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S12:l90-migrate-fs_rm] Move `tools/fs_rm/main.go` to `tools/cmd/fs_rm/fs_rm.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S13:l90-migrate-fs_move] Move `tools/fs_move/main.go` to `tools/cmd/fs_move/fs_move.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S14:l90-migrate-fs_search] Move `tools/fs_search/main.go` to `tools/cmd/fs_search/fs_search.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S15:l90-migrate-fs_apply_patch] Move `tools/fs_apply_patch/main.go` to `tools/cmd/fs_apply_patch/fs_apply_patch.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S16:l90-migrate-fs_read_lines] Move `tools/fs_read_lines/main.go` to `tools/cmd/fs_read_lines/fs_read_lines.go`, update tests (`fs_read_lines*_test.go`) and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S17:l90-migrate-fs_edit_range] Move `tools/fs_edit_range/main.go` to `tools/cmd/fs_edit_range/fs_edit_range.go`, update tests and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S18:l90-migrate-fs_listdir] Move `tools/fs_listdir/main.go` to `tools/cmd/fs_listdir/fs_listdir.go`, update tests (`fs_listdir*_test.go`) and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S19:l90-migrate-fs_stat] Move `tools/fs_stat/main.go` to `tools/cmd/fs_stat/fs_stat.go`, update test and `Makefile`; DoD: targeted tests pass, binary builds from new path, suite green.
  - [ ] [S20:l90-remove-legacy-paths] Delete legacy tool sources left under `tools/*` (e.g., `tools/fs_read_file.go`, `tools/*/main.go`) with `git rm` and update `Makefile`/`clean` to stop referencing old paths; DoD: `rg "\./tools/(fs_|exec|timecli)" -g '!tools/cmd/**'` finds no sources, `make build-tools clean` reproducible, suite green.
  - [ ] [S21:l90-update-integration] Update `cmd/agentcli/tools_integration_test.go` and any examples to assume `tools/bin` layout and validate end-to-end tool invocation via `tools.json`; DoD: integration test passes with new paths, README quickstart verified, suite green.
  - [ ] [S22:l90-final-sweep] Search-and-replace any remaining built-path references (`./tools/<NAME>`) across repo (code, docs, scripts) to `./tools/bin/<NAME>` and ensure links and examples resolve; DoD: workspace grep returns none, `make lint test build build-tools` all green, `git status` clean.
  - [ ] [S32:l90-manifest-crossplat-bin-prefix] In `internal/tools/manifest.go`, perform relative `command[0]` bin-prefix validation using `filepath.ToSlash` and `path.Clean` so Windows path separators are normalized; extend `internal/tools/manifest_test.go` with cases for `./tools/bin/name` and `..\\tools\\bin\\name` (normalized reject) to ensure cross‑platform correctness; DoD: new test fails before change and passes after, `go test ./...` green on Linux/macOS and Windows runners when available.
  - [ ] [S33:l90-move-fs_read_file-tests] Relocate `tools/fs_read_file_test.go` to `tools/cmd/fs_read_file/fs_read_file_test.go` and refactor it to use `tools/testutil/buildtool.go::BuildTool(t,"fs_read_file")` after [S29:l90-test-helper-buildtool]; DoD: `go test ./tools/cmd/fs_read_file -run FsReadFile` passes in isolation and `go test ./...` remains green.
  - [ ] [S34:l90-integration-relative-tools-bin] Amend `cmd/agentcli/tools_integration_test.go` to build `fs_write_file` and `fs_read_file` into `tools/bin/` under a temp working directory and write a manifest using relative `./tools/bin/<name>` paths to exercise the new convention end‑to‑end; DoD: test passes locally and in CI with no reliance on absolute paths, suite green.
  - [ ] [S35:l90-move-fs_write_file-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_write_file_test.go` to `tools/cmd/fs_write_file/fs_write_file_test.go` using `tools/testutil/buildtool.go::BuildTool(t,"fs_write_file")`; DoD: `go test ./tools/cmd/fs_write_file -run FsWriteFile` and `go test ./...` are green.
  - [ ] [S36:l90-move-fs_append_file-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_append_file_test.go` to `tools/cmd/fs_append_file/fs_append_file_test.go` with `BuildTool(t,"fs_append_file")`; DoD: targeted package test and full suite green.
  - [ ] [S37:l90-move-fs_mkdirp-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_mkdirp_test.go` to `tools/cmd/fs_mkdirp/fs_mkdirp_test.go` using `BuildTool(t,"fs_mkdirp")`; DoD: targeted package test and full suite green.
  - [ ] [S38:l90-move-fs_rm-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_rm_test.go` to `tools/cmd/fs_rm/fs_rm_test.go` using `BuildTool(t,"fs_rm")`; DoD: targeted package test and full suite green.
  - [ ] [S39:l90-move-fs_move-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_move_test.go` to `tools/cmd/fs_move/fs_move_test.go` using `BuildTool(t,"fs_move")`; DoD: targeted package test and full suite green.
  - [ ] [S40:l90-move-fs_search-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_search_test.go` to `tools/cmd/fs_search/fs_search_test.go` using `BuildTool(t,"fs_search")`; DoD: targeted package test and full suite green.
  - [ ] [S41:l90-move-fs_listdir-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_listdir_test.go`, `tools/fs_listdir_glob_test.go`, and `tools/fs_listdir_symlink_test.go` to `tools/cmd/fs_listdir/` using `BuildTool(t,"fs_listdir")`; DoD: `go test ./tools/cmd/fs_listdir` and `go test ./...` green.
  - [ ] [S42:l90-move-fs_read_lines-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_read_lines_test.go` and `tools/fs_read_lines_maxbytes_test.go` to `tools/cmd/fs_read_lines/` using `BuildTool(t,"fs_read_lines")`; DoD: targeted package test and full suite green.
  - [ ] [S43:l90-move-fs_apply_patch-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_apply_patch_test.go` to `tools/cmd/fs_apply_patch/fs_apply_patch_test.go` with `BuildTool(t,"fs_apply_patch")`; DoD: targeted package test and full suite green.
  - [ ] [S44:l90-move-fs_edit_range-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_edit_range_test.go`, `tools/fs_edit_range_binary_test.go`, and `tools/fs_edit_range_concurrency_test.go` to `tools/cmd/fs_edit_range/` using `BuildTool(t,"fs_edit_range")`; DoD: `go test ./tools/cmd/fs_edit_range` and `go test ./...` green.
  - [ ] [S45:l90-move-fs_stat-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/fs_stat_test.go` to `tools/cmd/fs_stat/fs_stat_test.go` with `BuildTool(t,"fs_stat")`; DoD: targeted package test and full suite green.
  - [ ] [S46:l90-move-exec-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/exec_test.go` to `tools/cmd/exec/exec_test.go` with `BuildTool(t,"exec")`; DoD: targeted package test and full suite green.
  - [ ] [S47:l90-move-get_time-tests] (after [S29:l90-test-helper-buildtool]) Move `tools/timecli_test.go` (if present) to `tools/cmd/get_time/get_time_test.go` with `BuildTool(t,"get_time")`; DoD: targeted package test and full suite green.
  - [ ] [S48:l90-untrack-legacy-binaries] (after [S04:l90-gitignore-tighten]) Remove any tracked legacy binaries under `tools/*` without extensions (e.g., `tools/fs_read_file`) via `git rm --cached` and ensure `.gitignore` only ignores `tools/bin/**`; DoD: `git status` shows removals, `make build-tools` produces only `tools/bin/*`, suite green.
   - [ ] [S60:l90-make-tools-var] Introduce `TOOLS := get_time exec fs_read_file fs_write_file fs_append_file fs_rm fs_move fs_search fs_mkdirp fs_apply_patch fs_read_lines fs_edit_range fs_listdir fs_stat` in `Makefile` and refactor `build-tools` and `clean` to iterate deterministically over this list (no source moves yet), preserving current legacy source paths; DoD: `make build-tools` yields `tools/bin/{get_time,exec,fs_read_file,fs_write_file,fs_append_file,fs_rm,fs_move,fs_search,fs_mkdirp,fs_apply_patch,fs_read_lines,fs_edit_range,fs_listdir,fs_stat}` and `make clean` removes them all with a single list, tests unchanged and green.
   - [ ] [S61:l90-make-build-tool-target] Add `Makefile` target `build-tool` that builds a single tool into `tools/bin/$(NAME)` from legacy sources using `make build-tool NAME=fs_read_file`; DoD: command works for at least `fs_read_file` and `fs_mkdirp`, errors clearly when `NAME` missing or unknown; tests unchanged and green.
   - [ ] [S62:l90-verify-manifest-paths] Add `Makefile` target `verify-manifest-paths` that fails if `tools.json` has any relative `command[0]` not starting with `./tools/bin/` (allow absolute paths), implemented with `rg` and precise messaging; DoD: `make verify-manifest-paths` fails before S02 and passes after, message cites offending entries; tests unchanged and green.
   - [ ] [S63:l90-docs-contrib-workflow] Update `README.md` Contributing to mention `make check-tools-paths`, `make verify-manifest-paths`, and `make build-tool NAME=<name>` as the local workflow during migration; DoD: doc renders on GitHub, commands copy‑paste, tests unchanged and green.
   - [ ] [S64:l90-migration-guide-doc] Add `docs/migrations/tools-layout.md` describing migration from `./tools/<NAME>` to `./tools/bin/<NAME>` and new source layout `tools/cmd/<NAME>`, and link it from `docs/README.md`; DoD: docs render on GitHub, links resolve, tests unchanged and green.
* [ ] Standardize JSON error contract for all tools — on failure, write single-line stderr `{"error":"<escaped>","hint?":"<opt>"}` and exit non-zero; runner maps to tool message; DoD: negative-path tests per tool, docs snippet, CI green.
  - [x] [S03:l91-fs_listdir-error-json] add failing test for fs_listdir and implement standardized stderr JSON {"error":"..."}
  - [x] [S01:l90-fs_mkdirp-error-json] add failing test for fs_mkdirp and implement JSON stderr error contract
  - [x] [S02:l90-fs_read_file-error-json] add failing test for fs_read_file and implement JSON stderr error contract (preserve NOT_FOUND marker)
